<div class="row">
    <div class="col-md-12">
        <ul class="nav nav-tabs">
            <li class="nav-item pointer">
                <a class="nav-link" [ngClass]="{ 'active': false}" [routerLink]="['/']">
                    {{'LABEL_VISAO_GERAL' | i18n}}
                </a>
            </li>
            <li class="nav-item pointer">
                <a class="nav-link" (click)="mudarAbaSelecionada(tabs.principal.nome)"
                    [ngClass]="{ 'active': tabs.principal.ativo }">
                    {{'LABEL_PEDIDO_SUBSTITUICAO' | i18n}}
                </a>
            </li>

            <li class="nav-item pointer" *ngIf="isPedidoJulgado()">
                <a class="nav-link" (click)="mudarAbaSelecionada(tabs.julgamento.nome)"
                    [ngClass]="{ 'active': tabs.julgamento.ativo }">
                    {{'LABEL_TABS_JULGAMENTO' | i18n}}
                </a>
            </li>

            <li class="nav-item pointer" *ngIf="isMostrarAbaRecurso()">
                <a class="nav-link" *ngIf="pedido.chapaEleicao.tipoCandidatura.descricao != 'IES'"
                    (click)="mudarAbaSelecionada(tabs.recursoSubstituicao.nome)"
                    [ngClass]="{ 'active': tabs.recursoSubstituicao.ativo }">
                    {{'LABEL_RECURSO' | i18n}}
                </a>

                <a class="nav-link" *ngIf="pedido.chapaEleicao.tipoCandidatura.descricao == 'IES'"
                    (click)="mudarAbaSelecionada(tabs.recursoSubstituicao.nome)"
                    [ngClass]="{ 'active': tabs.recursoSubstituicao.ativo }">
                    {{'LABEL_RECONSIDERACAO' | i18n}}
                </a>
            </li>

            <li class="nav-item pointer" *ngIf="isSecundoPedidoJulgado()">
                <a class="nav-link" (click)="mudarAbaSelecionada(tabs.julgamentoSegundaInstancia.nome)"
                    [ngClass]="{ 'active': tabs.julgamentoSegundaInstancia.ativo }">
                    {{'LABEL_TABS_JULGAMENTO_2' | i18n}}
                </a>
            </li>
        </ul>

        <div class="tab-content">

            <div class="tab-pane fade card rounded-0" [ngClass]="{ 'active show': tabs.principal.ativo }" *ngIf="tabs.principal.ativo">
                <div class="col-md-12">
                    <a [routerLink]="['/']"> <i class="fa fa-desktop fa-2x m-2 pointer" aria-hidden="true"></i> </a>
                </div>
                <div class="col-md-12">
                    <h5 class="card-title colorGray">
                        <a class="pointer" (click)="voltar()">
                            <i class="fa fa-arrow-left" aria-hidden="true"></i>
                        </a>
                        <b>{{'TITLE_VISUALIZAR_PEDIDO_SUBSTITUICAO' | i18n}}</b>
                    </h5>
                </div>

                <div class="box-separador bg-primary"></div>

                <div class="tab-pane fade pl-3 pr-3 pb-5 mt-3" id="tab-pane-principal" [ngClass]="{ 'active show': true}">
                    <div class="rounded-0">
                        <div class="subtitle-line">
                            <span class="bg-white"> {{'TITLE_DETALHAR_PEDIDO_SUBSTITUICAO_CANDIDATURA' | i18n}}
                            </span>
                        </div>
                    </div>
                </div>

                <membros-chapa-substituicao
                    [membroSubstitutoTitular]="membroSubstitutoTitular"
                    [membroSubstituidoTitular]="membroSubstituidoTitular"
                    [membroSubstitutoSuplente]="membroSubstitutoSuplente"
                    [membroSubstituidoSuplente]="membroSubstituidoSuplente">
                </membros-chapa-substituicao>

                <!-- Separador horizontal verde -->
                <div class="box-separador bg-primary font-white">
                    <div fxLayout="row" fxLayoutAlign="center center" >
                        {{'TITLE_JUSTIFICATIVA_PEDIDO_SUBSTITUICAO_DOCUMENTO' |i18n}}
                    </div>
                </div>

                <!-- Justificativa -->
                <div class="tab-pane fade card rounded-0 pl-2 pr-2 pb-2 mt-2" [ngClass]="{ 'active show':true}">
                    <div class="card border pl-2 pr-2 pb-3 pt-3" style="border-radius: 8px mb-5">
                        <b class="pr-3">{{'LABEL_JUSTIFICATIVA_PEDIDO_SUBSTITUICAO' |i18n}} </b>
                        <div class="card-body bg-green pl-3 pr-3 mb-3 mt-3" style="border-radius: 8px;">
                            <div class="row">
                                <div class="col-md-12">
                                    <ckeditor name="descricaoCurriculo" id="IdDescricaoCurriculo"
                                        [(ngModel)]="pedido.justificativa"
                                        [readOnly]="true" [config]="configuracaoCkeditor">
                                    </ckeditor>
                                </div>
                            </div>
                        </div>
                        <!-- Documento -->
                        <b>{{'LABEL_DOCUMENTO' |i18n}}</b>
                        <div class="mt-3">
                            <div class="card-body bg-green pl-3 pr-3" style="border-radius: 8px;">
                                <div class="col-md-4 pt-0">
                                    {{ 'LABEL_ARQUIVO' | i18n }}
                                    <hr>
                                    <download *ngIf="pedido.nomeArquivo" title="{{ pedido.nomeArquivo }}" class="center-no-arquivo pointer p-0"
                                        [download]="pedido.nomeArquivo" (process)="download($event, pedido)" style="background: none;">
                                        {{ pedido.nomeArquivo }}
                                        <i class="fa fa-download" aria-hidden="true"></i>
                                    </download>
                                    <span *ngIf="!pedido.nomeArquivo">{{ 'LABEL_NAO_APLICADO' | i18n }}</span>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="isMostraJulgamento()" fxLayout="row" fxLayoutAlign="start center"  class="mt-3">
                            <button class="btn btn-primary btn-sm" (click)="abrirModalJulgamento(templateJulgamento)"> {{'LABEL_JULGAR_SUBSTITUICAO' | i18n}}</button>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start center" class="mt-3 mb-3">
                        <div class="col-md-4 pt-0">
                            <download title="pedido_substituicao_membro_chapa.phf" class="center-no-arquivo pointer p-0"
                            [download]="'pedido_substituicao_membro_chapa.pdf'" (process)="downloadDocumentoPedidoSubstituicaoMembro($event)" style="background: none;">
                            <i class="fa fa-file-pdf-o" aria-hidden="true" style="font-size: 25px;"></i>
                                {{'LABEL_GERAR_PDF' | i18n}}
                            </download>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade card rounded-0" [ngClass]="{ 'active show': tabs.julgamento.ativo }"
                *ngIf="tabs.julgamento.ativo && isPedidoJulgado()">
                <aba-julgamento-substituicao
                    [pedidoSubstituicao]="pedido"
                    (voltarAba)="voltarAbaPrincipal()"
                    [configuracaoCkeditor]="configuracaoCkeditor"
                    [julgamentoSubstituicao]="julgamentoSubstituicaoCadastrado">
                </aba-julgamento-substituicao>
            </div>
            <div class="tab-pane fade card rounded-0" [ngClass]="{ 'active show': tabs.recursoSubstituicao.ativo }"
                *ngIf="tabs.recursoSubstituicao.ativo && isPedidoJulgado()">
                <aba-acompanhar-recurso
                    [dados]="pedido"
                    [dadosRecurso]="dadosServicoRecurso"
                    [nomeAbaVoltar]="tabs.julgamento.nome"
                    (voltarAbaEvent)="mudarAbaSelecionada($event)"
                    (salvarJulgamentoEvent)="salvarJulgamentoEvent($event)"
                    [julgamento]="julgamentoSegundaInstancia"
                    [tipoCandidatura]="pedido.chapaEleicao.tipoCandidatura.descricao"
                >
                </aba-acompanhar-recurso>
             </div>
            <div class="tab-pane fade card rounded-0" [ngClass]="{ 'active show': tabs.julgamentoSegundaInstancia.ativo }"
                *ngIf="tabs.julgamentoSegundaInstancia.ativo && isPedidoJulgado()">
                <aba-julgamento-segunda-instancia
                    [pedidoSubstituicao]="pedido"
                    (voltarAba)="voltarAbaPrincipal()"
                    [configuracaoCkeditor]="configuracaoCkeditor"
                    [tipoCandidatura]="pedido.chapaEleicao.tipoCandidatura.descricao"
                    [julgamentoSubstituicao]="julgamentoSegundaInstancia">
                </aba-julgamento-segunda-instancia>
            </div>
        </div>
    </div>
</div>



<ng-template #templateJulgamento>
    <div class="modal-header border-header-green">
        <div class="col-md-2"></div>
        <div class="col-md-8 text-center">
            <h6 class="modal-title pull-center">{{'TITLE_ANALISAR_PEDIDO_SUBSTITUICAO' |i18n}}</h6>
        </div>
        <div class="col-md-2 align-items-right">
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalJulgamento.hide()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    </div>
    <div class="modal-body" style="height: 100%; background-color: white">
        <card-panel [titulo]="'LABEL_DESCRICAO'" >
            <editor-de-texto [isRequerido]="true" [isHabilitado]="true" [tamanhoMaximo]="1000" [valor]="julgamento.parecer"
                [configuracao]="configuracaoCkeditor" [isMostrarTamanhoTextoRestantes]="true" [isSubmetido]="submitted"
                (valorChange)="adicionarParecerJulgamento($event)">
            </editor-de-texto>
        </card-panel>
        <card-panel [titulo]="'LABEL_DOCUMENTO'">
                <div class="row">
                    <div class="col-md-12 p-0">
                        <arquivo
                        [maxArquivos]="1"
                        [hasUpload]="true"
                        [hasDownload]="true"
                        [hasExclusao]="true"
                        [hasCadastro]="true"
                        [msgMaxArquivos]="'MSG_PERMISSAO_UPLOAD_1'"
                        (salvarEvent)="salvarArquivoJulgamento($event)"
                        (download)="downloadArquivoJulgamento($event)">
                        </arquivo>
                    </div>
                </div>
        </card-panel>
        <div class="row">
            <div class="col-md-12 text-left pt-3">
                <button class="btn btn-danger" (click)="validarJulgamento(2)">{{'LABEL_INDEFIRIR' |i18n}}</button>
                <button class="btn btn-primary ml-3" (click)="validarJulgamento(1)">{{'LABEL_DEFIRIR' |i18n}}</button>
            </div>
        </div>

    </div>
</ng-template>

<ng-template #templateConfirmacao let-confirmacaoSubstituicao="membros" style="margin-top: 25%;">
    <div class="modal-header border-header-green">
        <div class="col-md-12 text-center">
            <h6 class="modal-title pull-center">{{tituloConfirmacaoJulgamento |i18n}}</h6>
        </div>
    </div>
    <div class="modal-body" style="height: 100%; background-color: white">
        <div class=" pl-3 pr-3">
        <div class="box-separador-linha"></div>
            <div class="row">
                <div class="box-destaque shadow text-left" *ngIf="deferimento == 1">
                    {{'MSG_PREZADO_DEFERIMENTO_JULGAMENTO' | i18n}} {{pedido.numeroProtocolo}}.
                </div>
                <div class="box-destaque shadow text-left" *ngIf="deferimento == 2">
                    {{'MSG_PREZADO_INDEFERIMENTO_JULGAMENTO' | i18n}} {{pedido.numeroProtocolo}}.
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 text-left pt-3 pl-0">
                    <button class="btn btn-danger" (click)="modalRef.hide()">{{'LABEL_CANCELAR' |i18n}}</button>
                    <button class="btn btn-primary ml-3" (click)="salvarJulgamento()">{{'LABEL_CONFIRMAR' |i18n}}</button>
                </div>
            </div>
        </div>
    </div>
</ng-template>
