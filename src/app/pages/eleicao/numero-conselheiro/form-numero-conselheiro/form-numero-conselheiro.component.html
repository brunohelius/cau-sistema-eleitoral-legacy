<div class="row">
    <div class="col-md-12">
        <ul class="nav nav-tabs">
            <li class="nav-item pointer">
                <a class="nav-link" (click)="onSelect(tab.tabNumeroConselheiro)"
                    [ngClass]="{'active': tab.tabNumeroConselheiro.active}">
                    <span>{{'LABEL_NUMERO_CONSELHEIRO' | i18n}}</span>
                </a>
            </li>
            <li class="nav-item pointer">
                <a class="nav-link" (click)="onSelect(tab.tabExtrato)" [ngClass]="{'active': tab.tabExtrato.active}">
                    {{'LABEL_EXTRATO' | i18n}}
                </a>
            </li>
            <li class="nav-item pointer">
                <a class="nav-link" (click)="onSelect(tab.tabHistorico)"
                    [ngClass]="{'active': tab.tabHistorico.active}">
                    {{'LABEL_TABS_HISTORICO' | i18n}}
                </a>
            </li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane fade"
                [ngClass]="{ 'active': tab.tabNumeroConselheiro.active, 'show': tab.tabNumeroConselheiro.active }"
                *ngIf="tab.tabNumeroConselheiro.active">
                <div class="card rounded-0">
                    <div class="card-header rounded-0">
                        <h6 class="card-title ">
                            <a (click)="voltarLista()">
                                <i class="fa fa-arrow-left" aria-hidden="true"></i>
                            </a>
                            <span>{{'LABEL_INFORMAR_NUMERO_CONSELHEIRO' | i18n}}</span>
                        </h6>
                        <hr />
                        <i class="fa fa-users fa-2x text-primary"></i>
                    </div>
                    <div class="bg-primary">
                        &nbsp;
                    </div>

                    <div class="alert bg-green shadow m-3">
                        <span><i class="fa fa-exclamation-circle"></i>
                            {{'LABEL_INFORMACOES_IMPORTANTE' | i18n}}</span>

                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="30px">
                            <div fxFlex="20">
                                <label>{{'LABEL_ANO_ELEICAO' |i18n}}</label>
                                <input type="text" class="form-control" [(ngModel)]="calendario.eleicao.ano" readonly />
                            </div>
                            <div fxFlex="20">
                                <label>{{'LABEL_ELEICAO' |i18n}}</label>
                                <input type="text" class="form-control" [(ngModel)]="calendario.eleicao.descricao"
                                    readonly />
                            </div>
                        </div>
                    </div>
                    <div class="bg-primary text-white">
                        <span class="ml-3">{{'LABEL_NUMERO_CONSELHEIRO' | i18n}}</span>
                    </div>

                    <div class="alert bg-green shadow m-3">
                        <span class="mt-2"><i class="fa fa-filter"></i>
                            {{'LABEL_FILTROS' | i18n}}</span>
                        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="10px">
                            <div fxFlex="20" class="mt-3">
                                <label>{{'LABEL_UF' |i18n}}</label>
                                <select class="form-control" [(ngModel)]="ufFiltro">
                                    <option value="0">{{'LABEL_SELECIONE' | i18n}}</option>
                                    <option value="">{{'LABEL_TODAS' | i18n}}</option>
                                    <option *ngFor="let cauf of cauUfs" value="{{cauf.id}}">{{cauf.prefixo}}</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div fxLayout="row">
                        <div fxFlex="20">
                            <button class="btn btn-primary ml-3" (click)="filterPorUf()"
                                type="button">{{'LABEL_PESQUISAR' |i18n}}</button>
                        </div>
                    </div>

                    <div class="bg-green alert shadow m-3">
                        <div class="row">
                            <div class="col-md-6 align-items-right form-inline green-font-bolder">
                                <div>
                                    <span>{{ 'LABEL_MOSTRAR' | i18n }}: </span>
                                    <select class="form-control" [(ngModel)]="limitePaginacao" [name]="limitePaginacao">
                                        <option *ngFor="let item of limitesPaginacao" [ngValue]="item">
                                            {{ item }}
                                        </option>
                                    </select>
                                    <span> {{ 'LABEL_REGISTRO' | i18n}}</span>
                                </div>
                            </div>
                            <div class="col-md-6 align-items-left">
                                <div class="div-right mt-3">
                                    <input type="text" class="form-control largura-campo" [(ngModel)]="search"
                                        placeholder="{{'LABEL_BUSCAR' |i18n}}" (ngModelChange)="filter($event)"
                                        maxlength="50">
                                </div>
                            </div>
                        </div>
                        <table class="table table-borderless table-sm mt-3" [mfData]="profissionais" #mf="mfDataTable"
                            [mfRowsOnPage]="limitePaginacao" *ngIf="profissionais">
                            <tbody>
                                <tr *ngFor="let profissional of mf.data">
                                    <td colspan="2">
                                        <div class="card shadow border rounded-2 my-1">
                                            <div class="card-body p-1">
                                                <div fxLayout="row"
                                                    class="font-weight-bold text-center border-bottom border-secondary">
                                                    <div fxFlex="50px">{{ 'LABEL_UF' | i18n}}</div>
                                                    <div fxFlex>{{ 'LABEL_QTD_PROFISSIONAL_ATIVO' | i18n}}</div>
                                                    <div fxFlex>{{ 'LABEL_PROPORCAO_CONSELHEIRO' | i18n}}</div>
                                                    <div fxFlex>{{ 'LABEL_LEI_12378' | i18n}}</div>
                                                    <div fxFlex>{{ 'LABEL_EDITADO' | i18n}}</div>
                                                    <div fxFlex="50px">{{ 'LABEL_ACAO' | i18n}}</div>
                                                </div>
                                                <div fxLayout="row" class="text-center mt-1">
                                                    <div fxFlex="50px">{{profissional.prefixo}}</div>
                                                    <div fxFlex>{{profissional.qtdProfissional}}</div>
                                                    <div fxFlex [ngClass]="{'text-danger': profissional.situacaoEditado}">{{profissional.numeroProporcaoConselheiro}}</div>
                                                    <div fxFlex>{{profissional.lei.descricao}}
                                                        <span *ngIf="!profissional.lei.descricao">-</span>
                                                    </div>
                                                    <div fxFlex [innerHtml]="verificaStatusEditado(profissional)"></div>
                                                    <div fxFlex="50px">
                                                        <div class="btn-group" dropdown triggers="hover"
                                                            (mouseleave)="dp.hide()" #dp="bs-dropdown"
                                                            [isDisabled]="profissional.qtdProfissional === '-' && profissional.descricao !== 'IES'">
                                                            <button dropdownToggle type="button"
                                                                class="btn btn-link text-muted p-0"
                                                                aria-controls="dropdown-basic">
                                                                <i class="align-middle colorAcao fas fa-ellipsis-v"
                                                                    aria-hidden="true"></i>
                                                            </button>

                                                            <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu"
                                                                role="menu" aria-labelledby="button-basic">
                                                                <li role="menuitem">
                                                                    <a href="javascript:;"
                                                                        class="dropdown-item background-grey"
                                                                        (click)="alterarProporcaoConselheiro(profissional, templateJustificativa)">{{'LABEL_ALTERAR' |i18n}}</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr class="mt-3">
                                    <td>
                                        <p class="m-0">{{ 'LABEL_TOTAL_PROFISSIONAIS' | i18n }} <span
                                                class="text-danger">{{ 'LABEL_ATIVOS' | i18n}}</span> :
                                            {{totalProfAtivos}}</p>
                                        <p>{{ 'LABEL_TOTAL_PROFISSIONAIS' | i18n }}: {{totalProf}}</p>
                                    </td>
                                    <td class="float-right">
                                        <mfBootstrapPaginator></mfBootstrapPaginator>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                        <h4 *ngIf="profissionais.length === 0">{{ 'LABEL_NENHUM_REGISTRO_ENCONTRADO' | i18n }}</h4>
                    </div>

                    <div class="alert">
                        <download [title]="'numero_conselheiro.pdf'" class="center-no-arquivo"
                            [download]="'numero_conselheiro.pdf'" (process)="gerarFile($event,'pdf')">
                            <a class="icone pointer p-0" aria-hidden="true"><i
                                    class="fa fa-file-pdf-o  fa-2x text-primary" ></i>{{ 'LABEL_GERAR_PDF' | i18n }}</a>
                        </download>
                        <download [title]="'numero_conselheiro.xlsx'" class="center-no-arquivo"
                            [download]="'numero_conselheiro.xlsx'" (process)="gerarFile($event,'xls')">
                            <a class="icone pointer p-0" aria-hidden="true"><i
                                    class="fa fa-file-excel-o  fa-2x text-primary" ></i>{{ 'LABEL_GERAR_XLSX' | i18n }}</a>
                        </download>
                        <a href="javascript:;" class="btn btn-link"
                            (click)="atualizarTotaisMembro(templateJustificativaAtualiza)">
                            <i class="fa fa-refresh fa-2x ml-3 text-primary" ></i>{{ 'LABEL_ATUALIZAR' | i18n }}
                        </a>

                    </div>
                </div>

            </div>
            <div class="tab-pane fade" [ngClass]="{ 'active': tab.tabExtrato.active, 'show': tab.tabExtrato.active }"
                *ngIf="tab.tabExtrato.active">
                <extrato-numero-conselheiro (voltar)="onSelect(tab.tabNumeroConselheiro)"></extrato-numero-conselheiro>
            </div>
            <div class="tab-pane fade"
                [ngClass]="{ 'active': tab.tabHistorico.active, 'show': tab.tabHistorico.active }"
                *ngIf="tab.tabHistorico.active">
                <hist-numero-conselheiro (voltar)="onSelect(tab.tabNumeroConselheiro)"></hist-numero-conselheiro>
            </div>
        </div>
    </div>
</div>

<ng-template #templateJustificativa>
    <div fxLayout="row" fxLayoutAlign="center center" class="p-2">
        <h4 class="modal-title text-right" fxFlex="60">{{'LABEL_JUSTIFICATIVA' |i18n}}</h4>
        <button type="button" fxFlex class="close text-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="bg-primary">
        &nbsp;
    </div>
    <div class="modal-body">
        <form #formJust="ngForm">
            <div class="mt-2 body-justify">
                <div class="mt-3">
                    <div class="my-2" fxLayout="row">
                        <div fxFlex="35">
                            {{'LABEL_INFORME_PROPORCAO_CONSELHEIRO' |i18n}}
                        </div>
                        <div fxFlex="40">
                            <form-valid [submitted]="submitted">
                                <input type="text" class="form-control" [inputMask]="'999'" required name="qtdProporcaoConselheiroEdit"
                                    [(ngModel)]="qtdProporcaoConselheiroEdit" />
                            </form-valid>
                        </div>
                    </div>

                    <div class="mt-3">
                        {{'LABEL_MESSAGE_JUSTIFICATIVA_PROPORCAO_CONSELHEIRO' |i18n}}
                        <div fxLayout="row" class="border border-primary mt-3 mb-2">
                            <div fxFlex="30px" class="bg-primary text-center text-white">
                                <i class="fa fa-bell p-0"></i>
                            </div>
                            <div fxFlex class="pl-2">
                                {{'LABEL_MESSAGE_JUSTIFIQUE_ALTERACAO' |i18n}}
                            </div>
                        </div>
                        <form-valid [submitted]="submitted">
                            <textarea [(ngModel)]="justificativa" class="form-control" rows="3" maxlength="200"
                                id="justificativa" name="justificativa" required></textarea>
                        </form-valid>
                    </div>

                </div>
            </div>
            <button type="submit" class="btn btn-primary mt-3 mb-2" (click)="salvarAlteracaoJustificativa(formJust)">
                {{'LABEL_SALVAR' |i18n}}
            </button>
        </form>
    </div>
</ng-template>

<ng-template #templateJustificativaAtualiza>
    <div fxLayout="row" fxLayoutAlign="center center" class="p-2">
        <h4 class="modal-title text-right" fxFlex="60">{{'LABEL_JUSTIFICATIVA' |i18n}}</h4>
        <button type="button" fxFlex class="close text-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="bg-primary">
        &nbsp;
    </div>
    <div class="modal-body">
        <form #formJustAtualiza="ngForm">
            <div class="mt-2 body-justify">
                <div class="mt-3">

                    <div class="mt-3">
                        {{'LABEL_MESSAGE_JUSTIFICATIVA_ATUALIZA_CONSELHEIRO' |i18n}}
                        <div fxLayout="row" class="border border-primary mt-3 mb-2">
                            <div fxFlex="30px" class="bg-primary text-center text-white">
                                <i class="fa fa-bell p-0"></i>
                            </div>
                            <div fxFlex class="pl-2">
                                {{'LABEL_MESSAGE_JUSTIFIQUE_ATUALIZACAO' |i18n}}
                            </div>
                        </div>
                        <form-valid [submitted]="submitted">
                            <textarea [(ngModel)]="justificativaAtualiza" class="form-control" rows="3" maxlength="200"
                                id="justificativaAtualiza" name="justificativaAtualiza" required></textarea>
                        </form-valid>
                    </div>

                </div>
            </div>
            <button type="submit" class="btn btn-primary mt-3 mb-2"
                (click)="salvarJustificativaAtualiza(formJustAtualiza)">
                {{'LABEL_SALVAR' |i18n}}
            </button>
        </form>
    </div>
</ng-template>